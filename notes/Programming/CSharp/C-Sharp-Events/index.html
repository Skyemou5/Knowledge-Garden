<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Events used to decouple various systems and clean up your code.
 Just a way to say something happened without caring who listens or responds."><title>C Sharp Events</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://notes.benshurts.com//icon.png><link href=https://notes.benshurts.com/styles.708c2658f93e3a9d323a1f9fded8f4b2.min.css rel=stylesheet><link href=https://notes.benshurts.com/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://notes.benshurts.com/js/darkmode.7f1fd235efdec6a4bdcb4d8d99113082.min.js></script>
<script src=https://notes.benshurts.com/js/util.9825137f5e7825e8553c68ce39ac9e44.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://notes.benshurts.com/js/popover.9b72b70bd35617d0635e9d15463662b2.min.js></script>
<script src=https://notes.benshurts.com/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://notes.benshurts.com/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script>
<script src=https://notes.benshurts.com/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const BASE_URL="https://notes.benshurts.com/",fetchData=Promise.all([fetch("https://notes.benshurts.com/indices/linkIndex.e5fac294b23aff3bed7ca6fd1b2c0162.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://notes.benshurts.com/indices/contentIndex.d26e953cd9ad97e044e299066664b9c9.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://notes.benshurts.com",!0,!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://notes.benshurts.com",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/notes.benshurts.com\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://notes.benshurts.com/js/full-text-search.24827f874defbbc6d529926cbfcfb493.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://notes.benshurts.com/>Knowledge Garden</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>C Sharp Events</h1><p class=meta>Last updated
Oct 31, 2022
<a href=https://github.com/benshurts/Knowledge-Garden/notes/Programming/CSharp/C%20Sharp%20Events.md rel=noopener>Edit Source</a></p><ul class=tags><li><a href=https://notes.benshurts.com/tags/CSharp/>Csharp</a></li><li><a href=https://notes.benshurts.com/tags/unity/>Unity</a></li></ul><aside class=mainTOC><details open><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#publishers>Publishers</a></li><li><a href=#subscribers>Subscribers</a><ol><li><a href=#eventargs>EventArgs</a></li><li><a href=#actions>Actions</a></li></ol></li></ol></nav></details></aside><a href=#events><h1 id=events><span class=hanchor arialabel=Anchor># </span>Events</h1></a><p>used to decouple various systems and clean up your code.</p><blockquote><p>Just a way to say something happened without caring who listens or responds.</p></blockquote><p>Events fundamentally are made up of two things&mldr;</p><table><thead><tr><th>Publishers</th><th>Subscribers</th></tr></thead></table><hr><a href=#publishers><h2 id=publishers><span class=hanchor arialabel=Anchor># </span>Publishers</h2></a><p>Publishers can publish an event that can be subscribed to my zero or multiple things.</p><blockquote><p>The publisher does not know or care about the subscribers</p></blockquote><hr><blockquote><p>!! This ties into clean coding principles and design patterns like
<a href=https://medium.com/@ankit.sinhal/mvc-mvp-and-mvvm-design-pattern-6e169567bbad rel=noopener>MVP</a>. The idea behind these types of things are to separate parts of the code, like the logic from the visuals. Create Reusable code!</p></blockquote><hr><p>There are many ways to do events in c# and a few more in unity.</p><p>first you need to declare an event type in the code.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl><span class=k>public</span> <span class=k>event</span> <span class=n>EventHandler</span> <span class=n>OnSpacePressed</span><span class=p>;</span> <span class=c1>//simple event</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>private</span> <span class=k>void</span> <span class=n>Start</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>private</span> <span class=k>void</span> <span class=n>Update</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>	<span class=c1>//how to call an event</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>(</span><span class=n>Input</span><span class=p>.</span><span class=n>GetKeyDown</span><span class=p>(</span><span class=n>KeyCode</span><span class=p>.</span><span class=n>Space</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=c1>//space pressed</span>
</span></span><span class=line><span class=cl>		<span class=n>OnSpacePressed</span><span class=p>(</span><span class=k>this</span><span class=p>,</span><span class=n>EventArgs</span><span class=p>.</span><span class=n>Empty</span><span class=p>);</span><span class=c1>//this will fire off the event</span>
</span></span><span class=line><span class=cl>		<span class=c1>//this will fire off a null exception. we need to first check if it&#39;s null</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>The above throws a null error. Remember to check for null beforehand.
checked if null - verbose</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl><span class=k>if</span><span class=p>(</span><span class=n>OnSpcaePressed</span> <span class=p>!=</span> <span class=k>null</span><span class=p>)</span> 
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>OnSpacePressed</span><span class=p>(</span><span class=k>this</span><span class=p>,</span><span class=n>EventArgs</span><span class=p>.</span><span class=n>Empty</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>The syntactical sugar method to shorten the null check is more often used these days.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl><span class=n>OnSpacePressed</span><span class=p>?.</span><span class=n>Invoke</span><span class=p>(</span><span class=k>this</span><span class=p>,</span><span class=n>EventArgs</span><span class=p>.</span><span class=n>Empty</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>EventHandler is a simple <a href=/notes/Programming/CSharp/C-Sharp-Delegates rel=noopener class=internal-link data-src=/notes/Programming/CSharp/C-Sharp-Delegates>Delegate</a> with two fields. Is customary to use the work <em>on</em> before the event.</p><blockquote><p>! Remember that the event is a delegate with fields. Easy to forget because the declaration often doesn&rsquo;t show it.</p></blockquote><blockquote><p><a href="https://docs.microsoft.com/en-us/dotnet/api/system.eventhandler?view=net-6.0" rel=noopener>EventHandler</a> is the c# class that handles events. Make sure you use <em>system</em></p></blockquote><hr><a href=#subscribers><h2 id=subscribers><span class=hanchor arialabel=Anchor># </span>Subscribers</h2></a><p>The subscriber need to match the <em>signature</em> of the event. This means it needs to accept and return the same types of data.</p><blockquote><p>! The concept of signatures is used in other parts of C# like interfaces.</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl><span class=k>private</span> <span class=k>void</span> <span class=n>Testing_OnSpacePressed</span><span class=p>(</span><span class=n>Object</span> <span class=n>sender</span><span class=p>,</span> <span class=n>EventArgs</span> <span class=n>e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>&#34;Event Fired&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Then, in order to access the event, we need to subscribe. Subscribing usually happens when you bring the object into memory and you should unsubscribe when you unload the object. often in the <em>onenable</em> and <em>ondisable</em> methods.</p><p>The syntax for subscribing uses the following</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>+= // subscribe
</span></span><span class=line><span class=cl>-= // unsubscribe
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl><span class=k>private</span> <span class=k>void</span> <span class=n>OnEnable</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>	<span class=n>testevent</span> <span class=p>+=</span> <span class=n>TesteventFunc</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>private</span> <span class=k>void</span> <span class=n>OnDisable</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>	<span class=n>testevent</span> <span class=p>-=</span> <span class=n>TesteventFunc</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl><span class=k>public</span> <span class=k>event</span> <span class=n>EventHandler</span> <span class=n>OnSpacePressed</span><span class=p>;</span> <span class=c1>//simple event</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>private</span> <span class=k>void</span> <span class=n>Start</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>	<span class=n>OnSpacePressed</span> <span class=p>+=</span> <span class=n>Test_OnSpacePressed</span><span class=p>;</span> <span class=c1>// this is how we subscribe the function to the event</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>private</span> <span class=k>void</span> <span class=n>Update</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>	<span class=c1>//how to call an event</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=p>(</span><span class=n>Input</span><span class=p>.</span><span class=n>GetKeyDown</span><span class=p>(</span><span class=n>KeyCode</span><span class=p>.</span><span class=n>Space</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=c1>//space pressed</span>
</span></span><span class=line><span class=cl>		<span class=n>OnSpacePressed</span><span class=p>?.</span><span class=n>Invoke</span><span class=p>(</span><span class=k>this</span><span class=p>,</span><span class=n>EventArgs</span><span class=p>.</span><span class=n>Empty</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>private</span> <span class=k>void</span> <span class=n>Testing_OnSpacePressed</span><span class=p>(</span><span class=n>Object</span> <span class=n>sender</span><span class=p>,</span> <span class=n>EventArgs</span> <span class=n>e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>&#34;Event Fired&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>The above is still just in one class. The real benefits are when we listen from somewhere else.</p><p>In this case we just need references to the right object.</p><hr><a href=#eventargs><h3 id=eventargs><span class=hanchor arialabel=Anchor># </span>EventArgs</h3></a><p>Eventargs is the standard way to pass more information through the event.</p><p>The standard process is a bit verbose.</p><p>first we need to make a class the derives from eventargs.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>event</span> <span class=n>EventHandler</span> <span class=n>OnSpacePressed</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>OnSpacePressedEventArgs</span> <span class=p>:</span> <span class=n>EventArgs</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=c1>// here we define whatever fields we want</span>
</span></span><span class=line><span class=cl>	<span class=k>public</span> <span class=kt>int</span> <span class=n>spaceCount</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Once we define the fields in the custom class. We need to add the type to the evenhandler with &lt;>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>event</span> <span class=n>EventHandler</span><span class=p>&lt;</span><span class=n>OnSpacePressedEventArgs</span><span class=p>&gt;</span> <span class=n>OnSpacePressed</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>OnSpacePressedEventArgs</span> <span class=p>:</span> <span class=n>EventArgs</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=c1>// here we define whatever fields we want</span>
</span></span><span class=line><span class=cl>	<span class=k>public</span> <span class=kt>int</span> <span class=n>spaceCount</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>private</span> <span class=k>void</span> <span class=n>update</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span><span class=p>(</span><span class=n>Input</span><span class=p>.</span><span class=n>GetKeyDown</span><span class=p>(</span><span class=n>KeyCode</span><span class=p>.</span><span class=n>Space</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=c1>//space pressed</span>
</span></span><span class=line><span class=cl>		<span class=n>spaceCount</span><span class=p>++;</span>
</span></span><span class=line><span class=cl>		<span class=n>OnSpacePressed</span><span class=p>?.</span><span class=n>Invoke</span><span class=p>(</span><span class=k>this</span><span class=p>,</span><span class=k>new</span> <span class=n>OnSpacePressedEventArgs</span> <span class=p>{</span> <span class=n>spaceCount</span> <span class=p>=</span> <span class=n>spaceCount</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Then in the event subscriber you need to make sure to match the signature.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl><span class=k>private</span> <span class=k>void</span> <span class=n>Start</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>TestingEvents</span> <span class=n>testingEvents</span> <span class=p>=</span> <span class=n>GetComponent</span><span class=p>&lt;</span><span class=n>TestingEvents</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>	<span class=n>testingEvents</span><span class=p>.</span><span class=n>OnSpacePressed</span> <span class=p>+=</span> <span class=n>TestingEvents_OnSpacePressed</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>private</span> <span class=k>void</span> <span class=n>TestingEvent_OnSpace</span><span class=p>(</span><span class=kt>object</span> <span class=n>sender</span><span class=p>,</span> <span class=n>TestingEvents</span><span class=p>.</span><span class=n>onSpacePressedEventArgs</span> <span class=n>e</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>Debug</span><span class=p>.</span><span class=n>log</span><span class=p>(</span><span class=s>&#34;Space! &#34;</span><span class=p>+</span> <span class=n>e</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=n>TestingEvents</span> <span class=n>testingEvents</span> <span class=p>=</span> <span class=n>GetComponent</span><span class=p>&lt;</span><span class=n>TestingEvents</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>	<span class=n>testingEvents</span><span class=p>.</span><span class=n>OnSpacePressed</span> <span class=p>-=</span> <span class=n>TestingEvents_OnSpacePressed</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>You do <em>not</em> need to use <em>eventhandler</em>, event&rsquo;s work in other ways.</p></blockquote><p>We can define our own <em>delegate</em> to act as our event handler.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>delegate</span> <span class=k>void</span> <span class=n>TestEventDelegate</span><span class=p>(</span><span class=kt>float</span> <span class=n>f</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>Delegates are essentially function signatures</p></blockquote><p>Now we can make an event of the same type as our delegate.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl><span class=k>public</span> <span class=k>event</span> <span class=n>TestEventDelegate</span> <span class=n>OnFloatEvent</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>we can fire off this event in the same way as the other events.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl><span class=n>OnFloatEvent</span><span class=p>?.</span><span class=n>Invoke</span><span class=p>(</span><span class=m>5.5f</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>And we subscribe in same way too.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl><span class=n>testingEvents</span><span class=p>.</span><span class=n>OnFloatEvent</span> <span class=p>+=</span> <span class=n>TestingEvents_OnFloatEvent</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>private</span> <span class=k>void</span> <span class=n>TestingEvents_OnFloatEvent</span><span class=p>(</span><span class=kt>float</span> <span class=n>f</span><span class=p>)</span><span class=c1>//same signature as deligate</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=s>&#34;float &#34;</span><span class=p>+</span> <span class=n>f</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><hr><a href=#actions><h3 id=actions><span class=hanchor arialabel=Anchor># </span>Actions</h3></a><p>we can also use the <em>Action</em> event type. Action is just a <em>delegate</em> that returns <em>void</em>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl><span class=k>public</span> <span class=k>event</span> <span class=n>Action</span> <span class=n>OnActionEvent</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>Action also has a generic version.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl><span class=k>public</span> <span class=k>event</span> <span class=n>Action</span><span class=p>&lt;</span><span class=kt>bool</span><span class=p>,</span><span class=kt>int</span><span class=p>&gt;</span> <span class=n>OnActionEvent</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>we fire of the event in the same way.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl><span class=n>OnActionEvent</span><span class=p>?.</span><span class=n>Invoke</span><span class=p>(</span><span class=k>true</span><span class=p>,</span><span class=m>5</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>and we subscribe the same way</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl><span class=n>testingEvents</span><span class=p>.</span><span class=n>OnActionEvent</span> <span class=p>+=</span> <span class=n>TestingEvents_OnActionEvent</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>private</span> <span class=k>void</span> <span class=n>TestingEvents_OnActionEvents</span><span class=p>(</span><span class=kt>bool</span> <span class=n>arg1</span><span class=p>,</span><span class=kt>int</span> <span class=n>arg2</span><span class=p>){</span>
</span></span><span class=line><span class=cl>	<span class=n>Debug</span><span class=p>.</span><span class=n>Log</span><span class=p>(</span><span class=n>arg1</span><span class=p>,</span><span class=n>arg2</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><hr><a href=#unity-events><h1 id=unity-events><span class=hanchor arialabel=Anchor># </span>Unity Events</h1></a><p>These are show in the editor</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl><span class=k>public</span> <span class=n>UnityEvent</span> <span class=n>OnUnityEvent</span><span class=p>;</span>
</span></span></code></pre></td></tr></table></div></div><p>Invoked the same as the others.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c# data-lang=c#><span class=line><span class=cl><span class=n>OnUnityEvent</span><span class=p>?.</span><span class=n>Invoke</span><span class=p>();</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>This will show up in the inspector</p></blockquote><blockquote><p>! These can only take one argument in the editor.</p></blockquote></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/notes/Programming/CSharp/C-Sharp-Hub/ data-ctx="notes/Programming/CSharp/C Sharp Events" data-src=/notes/Programming/CSharp/C-Sharp-Hub class=internal-link>C-Sharp Hub</a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://notes.benshurts.com/js/graph.abd4bc2af3869a96524d7d23b76152c7.js></script></div></div><div id=contact_buttons><footer><p>Made by Ben Shurts using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2023</p><ul><li><a href=https://notes.benshurts.com/>Home</a></li><li><a href=https://twitter.com/artofbenshurts>Twitter</a></li><li><a href=https://github.com/benshurts>Github</a></li></ul></footer></div></div></body></html>