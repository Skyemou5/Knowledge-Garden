<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Matrices 1 Conventions. A Word of Warning! You may be surprised to find that the information we give on this page is different from what you find in other books or on the internet."><title>{{title}}</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://notes.benshurts.com//icon.png><link href=https://notes.benshurts.com/styles.708c2658f93e3a9d323a1f9fded8f4b2.min.css rel=stylesheet><link href=https://notes.benshurts.com/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://notes.benshurts.com/js/darkmode.7f1fd235efdec6a4bdcb4d8d99113082.min.js></script>
<script src=https://notes.benshurts.com/js/util.9825137f5e7825e8553c68ce39ac9e44.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://notes.benshurts.com/js/popover.9b72b70bd35617d0635e9d15463662b2.min.js></script>
<script src=https://notes.benshurts.com/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://notes.benshurts.com/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script>
<script src=https://notes.benshurts.com/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const BASE_URL="https://notes.benshurts.com/",fetchData=Promise.all([fetch("https://notes.benshurts.com/indices/linkIndex.eafd1de2ef84a9fb168986603409e39d.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://notes.benshurts.com/indices/contentIndex.63bb1ac4d2baf8d491f008e0503747ef.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://notes.benshurts.com",!0,!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://notes.benshurts.com",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'â€™':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/notes.benshurts.com\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://notes.benshurts.com/js/full-text-search.24827f874defbbc6d529926cbfcfb493.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://notes.benshurts.com/>Knowledge Garden</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>{{title}}</h1><p class=meta>Last updated
Oct 27, 2022
<a href=https://github.com/benshurts/Knowledge-Garden/notes/3D-Modeling/blender/Sources/Scratchpixel/How%20Matricies%20Work%20-%20scratchpixel.md rel=noopener>Edit Source</a></p><ul class=tags></ul><aside class=mainTOC><details open><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#conventions-a-word-of-warning>Conventions. A Word of Warning!</a></li><li><a href=#point-matrix-multiplication>Point-Matrix Multiplication</a></li><li><a href=#the-identity-matrix>The Identity Matrix</a></li><li><a href=#the-scaling-matrix>The Scaling Matrix</a></li><li><a href=#the-rotation-matrix>The Rotation Matrix</a></li></ol><ol><li><a href=#combining-rotation-matrices>Combining (Rotation) Matrices</a></li><li><a href=#the-translation-matrix>The Translation Matrix</a></li><li><a href=#rotation-around-an-arbitrary-axis>Rotation around an Arbitrary Axis</a></li></ol></nav></details></aside><a href=#matrices-1><h1 id=matrices-1><span class=hanchor arialabel=Anchor># </span>Matrices 1</h1></a><a href=#conventions-a-word-of-warning><h2 id=conventions-a-word-of-warning><span class=hanchor arialabel=Anchor># </span>Conventions. A Word of Warning!</h2></a><p>You may be surprised to find that the information we give on this page is different from what you find in other books or on the internet. The information is in fact the same but the order or the sign of the matrix coefficients may be different. This is because different authors/programs, use different conventions. Try to follow the logic of this lesson without paying too much attention to what other documents might say, and read the next chapter which will explain exactly how different conventions change the way we present them on paper and implement them in a program.</p><a href=#point-matrix-multiplication><h2 id=point-matrix-multiplication><span class=hanchor arialabel=Anchor># </span>Point-Matrix Multiplication</h2></a><p>In this lesson we will start to put all the things we have learned on points, vectors, matrices and coordinate systems together. And at last, you will learn how matrices work. We mentioned in the previous chapter that two matrices needed to have compatible sizes in order to be multiplied with each other. For instance the matrices of size <strong>m x p</strong> and <strong>p x n</strong> can be multiplied with each other. We also mentioned in the previous chapter that in computer graphics, we would primarily deal with 4x4 matrices.</p><p>A point or a vector is a sequence of three numbers and for this reason they too can be written as a 1x3 matrix, a matrix that has one row and three columns:</p><p>Point written in a matrix form $P=[xyz]$</p><p>.</p><p>The trick here is that, if we can write points and vectors as [1x3] matrices, we can multiply them by other matrices. Remember than the matrix <strong>m x p</strong> can be multiplied by the matrix <strong>p x n</strong> to give the matrix <strong>m x n</strong>. If the first matrix is a point we can then write m = 1 and p = 3. Which implies that the <strong>p x n</strong> matrix is something of the form 3 x n where n can be any number greater than 1. In theory, a multiplication of a [1x3] matrix by any of the following matrices would work: [3x1], [3x2], [3x3], [3x4], etc. Here is an example of a [1x3]*[3x4] matrix multiplication:</p><p>$$\begin{bmatrix}x & y & z\end{bmatrix} *
\begin{bmatrix}
c_{00}&c_{01}&{c_{02}}&c_{03}\\ c_{10}&c_{11}&{c_{12}}&c_{13}\\ c_{20}&c_{21}&{c_{22}}&c_{23}\\ \end{bmatrix}$$</p><p>There is two things we need to remember now to make sense of what we are going to explain. The first one is that a point multiplied by a matrix transforms the point to a new position. The result of a point multiplied by a matrix has to be a point. If it wasn&rsquo;t the case, we wouldn&rsquo;t be using matrices has a convenient way of transforming points. The second thing we need to remember is that a <strong>m x p</strong> matrix multiplied by a <strong>p x n</strong> matrix, gives a <strong>m x n</strong> matrix. If we look at our point as a 1x3 matrix, we need the result of the multiplication to be another point, that is a 1x3 matrix. It therefore requires the matrix that we will be multiplying the point with, to be a 3x3 matrix. Multiplying a 1x3 matrix by a 3x3 matrix gives as expected, a 1x3 matrix which is another point. Here is what this multiplication looks like:</p><p>$$\begin{bmatrix}x & y & z\end{bmatrix} *
\begin{bmatrix}
c_{00}&c_{01}&{c_{02}}\\ c_{10}&c_{11}&{c_{12}}\\ c_{20}&c_{21}&{c_{22}}\\ \end{bmatrix}$$</p><p>In CG, we usually use 4x4 matrices instead of 3x3 matrices and we will soon explain why, but for now, lets stick with the 3x3 matrices for a while. To finish this section of the chapter, we will write some pseudocode to show how we can multiply a point P</p><p>(or a vector) in its matrix form to a 3x3 matrix to get a new transformed point PT</p><p>. If you need a refresher on matrix multiplication, read the previous chapter. Remember that for each coefficient of new matrix, you need to multiply each coefficient from the current row for the left-hand side matrix with its &ldquo;equivalent&rdquo; coefficient from the current column for the right-hand side matrix and sum up the resulting products. In pseudo code, it gives something like that (we will give the version for 4x4 matrices later):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=c1>// multiply coeffs from row 1 with coeffs from column 1  
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Ptransformed</span><span class=p>.</span><span class=n>x</span> <span class=o>=</span> <span class=n>P</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>c00</span> <span class=o>+</span> <span class=n>P</span><span class=p>.</span><span class=n>y</span> <span class=o>*</span> <span class=n>c10</span> <span class=o>+</span> <span class=n>P</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=n>c20</span>  
</span></span><span class=line><span class=cl><span class=c1>// multiply coeffs from row 1 with coeffs from column 2  
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Ptransformed</span><span class=p>.</span><span class=n>y</span> <span class=o>=</span> <span class=n>P</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>c01</span> <span class=o>+</span> <span class=n>P</span><span class=p>.</span><span class=n>y</span> <span class=o>*</span> <span class=n>c11</span> <span class=o>+</span> <span class=n>P</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=n>c21</span>  
</span></span><span class=line><span class=cl><span class=c1>// multiply coeffs from row 1 with coeffs from column 3  
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Ptransformed</span><span class=p>.</span><span class=n>z</span> <span class=o>=</span> <span class=n>P</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>c02</span> <span class=o>+</span> <span class=n>P</span><span class=p>.</span><span class=n>y</span> <span class=o>*</span> <span class=n>c12</span> <span class=o>+</span> <span class=n>P</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=n>c22</span>  
</span></span></code></pre></td></tr></table></div></div><a href=#the-identity-matrix><h2 id=the-identity-matrix><span class=hanchor arialabel=Anchor># </span>The Identity Matrix</h2></a><p>The <strong>identity matrix</strong> or <strong>unit matrix</strong> is a square matrix whose coefficients are all 0 excepted the coefficients along the diagonal which are set to 1:</p><p>$$\begin{bmatrix}
\color{red}{1} & 0 & 0 \\ 0 & \color{red}{1} & 0 \\ 0 & 0 & \color{red}{1}
\end{bmatrix}$$</p><p>The result of P multiplied by the identity matrix is P. If we replace the coefficient of the identity matrix in the point-matrix multiplication code we can clearly understand why:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=c1>// multiplying P by the identity matrix gives P  
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Ptransformed</span><span class=p>.</span><span class=n>x</span> <span class=o>=</span> <span class=n>P</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=mi>1</span> <span class=o>+</span> <span class=n>P</span><span class=p>.</span><span class=n>y</span> <span class=o>*</span> <span class=mi>0</span> <span class=o>+</span> <span class=n>P</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=mi>0</span> <span class=o>=</span> <span class=n>P</span><span class=p>.</span><span class=n>x</span>  
</span></span><span class=line><span class=cl><span class=n>Ptransformed</span><span class=p>.</span><span class=n>y</span> <span class=o>=</span> <span class=n>P</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=mi>0</span> <span class=o>+</span> <span class=n>P</span><span class=p>.</span><span class=n>y</span> <span class=o>*</span> <span class=mi>1</span> <span class=o>+</span> <span class=n>P</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=mi>0</span> <span class=o>=</span> <span class=n>P</span><span class=p>.</span><span class=n>y</span>  
</span></span><span class=line><span class=cl><span class=n>Ptransformed</span><span class=p>.</span><span class=n>z</span> <span class=o>=</span> <span class=n>P</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=mi>0</span> <span class=o>+</span> <span class=n>P</span><span class=p>.</span><span class=n>y</span> <span class=o>*</span> <span class=mi>0</span> <span class=o>+</span> <span class=n>P</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=mi>1</span> <span class=o>=</span> <span class=n>P</span><span class=p>.</span><span class=n>z</span>  
</span></span></code></pre></td></tr></table></div></div><a href=#the-scaling-matrix><h2 id=the-scaling-matrix><span class=hanchor arialabel=Anchor># </span>The Scaling Matrix</h2></a><p>If you look at the code of the point-matrix multiplication you can see that the coordinates of the point P are respectively multiplied by the coefficients R00</p><p>for x, R11 for y and R22</p><p>for z. When these coefficients are set to 1 (and all the other coefficients of the matrix are set to 0), we get the identity matrix. However when these coefficients (along the diagonal) are different than 1 (whether smaller or bigger than 1), then they act as a multiplier on the point&rsquo;s coordinates (in other words, the points coordinates are scaled up or down by some amount). If you remember what we have said in the chapter on coordinate systems, multiplying the coordinates of a point by some real numbers results in scaling the point&rsquo;s coordinates. The scaling matrix can therefore be written as:</p><p>$$\begin{bmatrix}
\color{red}{S_X} & 0 & 0 \\ 0 & \color{red}{S_Y} & 0 \\ 0 & 0 & \color{red}{S_Z}
\end{bmatrix}$$</p><p>Where the real numbers SX</p><p>, SY and SZ</p><p>are the scaling factors.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=c1>// multiplying P by the scaling matrix  
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Ptransformed</span><span class=p>.</span><span class=n>x</span> <span class=o>=</span> <span class=n>P</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>Sx</span> <span class=o>+</span> <span class=n>P</span><span class=p>.</span><span class=n>y</span> <span class=o>*</span> <span class=mi>0</span> <span class=o>+</span> <span class=n>P</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=mi>0</span> <span class=o>=</span> <span class=n>P</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>Sx</span>  
</span></span><span class=line><span class=cl><span class=n>Ptransformed</span><span class=p>.</span><span class=n>y</span> <span class=o>=</span> <span class=n>P</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=mi>0</span> <span class=o>+</span> <span class=n>P</span><span class=p>.</span><span class=n>y</span> <span class=o>*</span> <span class=n>Sy</span> <span class=o>+</span> <span class=n>P</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=mi>0</span> <span class=o>=</span> <span class=n>P</span><span class=p>.</span><span class=n>y</span> <span class=o>*</span> <span class=n>Sy</span>  
</span></span><span class=line><span class=cl><span class=n>Ptransformed</span><span class=p>.</span><span class=n>z</span> <span class=o>=</span> <span class=n>P</span><span class=p>.</span><span class=n>x</span> <span class=o>*</span> <span class=mi>0</span> <span class=o>+</span> <span class=n>P</span><span class=p>.</span><span class=n>y</span> <span class=o>*</span> <span class=mi>0</span> <span class=o>+</span> <span class=n>P</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=n>Sz</span> <span class=o>=</span> <span class=n>P</span><span class=p>.</span><span class=n>z</span> <span class=o>*</span> <span class=n>Sz</span>  
</span></span></code></pre></td></tr></table></div></div><p>As an example, imagine a point P which coordinates are (1, 2, 3). If we set the coefficients of the scaling matrix with Sx = 1, Sy = 2 and Sz = 3, then P multiplied by this matrix gives another point whose coordinates are (1, 4, 9).</p><p>Note that if either one of the scaling coefficients in the matrix are negative, then the point&rsquo;s coordinate for the corresponding axis will be flipped (it will be mirrored to the other side of the axis).</p><a href=#the-rotation-matrix><h2 id=the-rotation-matrix><span class=hanchor arialabel=Anchor># </span>The Rotation Matrix</h2></a><p>What we will be talking about in this paragraph is about building a matrix that will rotate a point or a vector around one axis of the cartesian coordinate system. And for doing so, we will need to use trigonometric functions.</p><p><img src=https://www.scratchapixel.com/images/upload/geometry/rotation.png? width=auto alt></p><p>Figure 1: a 90 degrees counterclockwise rotation.</p><p>Lets take a point P defined in a three-dimensional coordinate system with coordinate (1, 0, 0). Lets ignore the z-axis for a while and assume that the point lies in the xy plane. What we want is to transform the point from P</p><p>to PT by the mean of a rotation (we could do this with a translation but using a rotation will make our demonstration easier). PT coordinates are (0, 1, 0). As you can see in figure 1 this can be done by rotating the point around the z-axis by 90 degrees <strong>counterclockwise</strong>. Lets assume now that we have a matrix R. When P is multiplied by R it transforms P to PT</p><p>. Considering what we know about matrix multiplication lets see how we can re-write a point-matrix multiplication and isolate the computation of each of the transformed point coordinates:</p><p>$$\begin{array}{l}
P_T.x = P.x * R_{00} + P.y * R_{10} + P.z * R_{20}\\ P_T.y = P.x * R_{01} + P.y * R_{11} + P.z * R_{21}\\ P_T.z = P.x * R_{02} + P.y * R_{12} + P.z * R_{22}\\ \end{array}$$</p><p><img src=https://www.scratchapixel.com/images/upload/geometry/rotation45.png? width=auto alt></p><p>Figure 2: a 45 degrees counterclockwise rotation.</p><p>As we said, we don&rsquo;t care so much about PT.z</p><p>for now which represents the z-coordinate of PT. Lets concentrate instead on PT.x and PT.y which represent respectively the x and y coordinates of PT. From P to PT, the x-coordinate goes from 1 to 0. If we look at the first line of the code we wrote to compute PT, it means that R00 has to be equal to 0. Considering that P.y and P.z are 0 anyway we don&rsquo;t care so much about the values that R10 and R20 may have for now. From P to PT the y-coordinate goes from 0 to 1. Lets have a look at the second line of code. What do we know about P? We know that P.x is 1 and that all the other coordinates of P are 0. Which necessarily means that R01 has to be 1. Let&rsquo;s recap. We know that R00 is 0 and R01 is 1. Lets write it down and see what R</p><p>looks like (compare this matrix with the identity matrix):</p><p>$$R_z=
\begin{bmatrix}
0 & 1 & 0 \\ 1 & 0 & 0 \\ 0 & 0 & 1 \\ \end{bmatrix}$$</p><p>Don&rsquo;t worry for now if you don&rsquo;t understand why the coefficients have the value they have. That will be explained soon. All you want to see, is that if you use this matrix to transform $P = (1, 0, 0)$ you will get $P_T = (0, 1, 0)$.</p><p>$$\begin{array}{l}
P_T.x = P.x * 0 + P.y * 1 + P.z * 0 = 0\\ P_T.y = P.x * 1 + P.y * 0 + P.z * 0 = 1\\ P_T.z = P.x * 0 + P.y * 0 + P.z * 1 = 0\\ \end{array}$$</p><p><img src=https://www.scratchapixel.com/images/upload/geometry/unitcircle.png? width=auto alt></p><p>Figure 3: cosine and sine can be used to determine the coordinate of a point on the x- and y-axis of the unit circle.</p><p>This is where our knowledge of trigonometric functions will become handy. If we look at a point on the unit circle we know that its x and y coordinates can be computed using the sine and the cosine of the angle Î¸</p><p>(see figure 3).</p><p>$$\begin{array}{l}
x = \cos(\theta) = 0\\ y = \sin(\theta) = 1\\ \text{with } {\theta = {\pi \over 2}}\\ \end{array}$$</p><p>When Î¸</p><p>= 0, x = 1 and y = 0. When Î¸ = 90 degrees (or Ï€2), x = 0 and y = 1. That is interesting because you will notice that x = 0 and y = 1 are the values of R00/R11 and R01/R10</p><p>respectively. So we could re-write the matrix R as:</p><h1 id=endbmatrix>$$R_z(\theta)=
\begin{bmatrix}
\cos(\theta) & \sin(\theta) & 0 \\ \sin(\theta) & \cos(\theta) & 0 \\ 0 & 0 & 1 \\ \end{bmatrix}</h1><p>\begin{bmatrix}
0 & 1 & 0 \\ 1 & 0 & 0 \\ 0 & 0 & 1 \\ \end{bmatrix} \text{ with } {\theta = {\pi \over 2}}$$</p><p>If you only want to make a rotation of 45 degrees (replace 90 by 45 or Ï€4) and apply R to P, you will get the coordinates (0.7071, 0.7071) for PT</p><p>which is correct (figure 2). Thus, it seems that we can generalise the notation for R (a matrix that rotates points around the z-axis) and write:</p><p>$$R_z(\theta)=
\begin{bmatrix}
\cos(\theta) & \sin(\theta) & 0 \\ \sin(\theta) & \cos(\theta) & 0 \\ 0 & 0 & 1 \\ \end{bmatrix}$$</p><p>We know that the transformation from P</p><p>to PT works with R in its current form but lets now imagine that P is (0, 1, 0) and PT is (1, 0, 0) which is a rotation of 90 degrees but this time <strong>clockwise</strong> (figure 4, see further down). Would R work and transform P to PT</p><p>? Lets check:</p><p>$$R_z=
\begin{bmatrix}
\cos(-{\pi \over 2}) & \sin(-{\pi \over 2}) & 0 \\ \sin(-{\pi \over 2}) & \cos(-{\pi \over 2}) & 0 \\ 0 & 0 & 1 \\ \end{bmatrix}=
\begin{bmatrix}
0 & -1 & 0 \\ -1 & 0 & 0 \\ 0 & 0 & 1 \\ \end{bmatrix}$$</p><p>$$\begin{array}{lll}
P_T.x = &0 * R_{00} &+& 1 * R_{10} &+& P.z * R_{20} &= \\ &0<em>0 &+& 1</em>-1 &+& 0<em>0&=-1\\ P_T.y = &0 * R_{01} &+& 1 * R_{11} &+& P.z * R_{21} &= \\ &0</em>-1 &+& 1<em>0 &+& 0</em>0&= 0\\ P_T.z = &0 * R_{02} &+& 1 * R_{12} &+& P.z * R_{22} &= \\ &0<em>0 &+& 1</em>0 &+& 0*1&= 0\\ \end{array}$$</p><p>That doesn&rsquo;t seem quite right since we started from the point with coordinate (0, 1, 0) and after transformation, we have the coordinates (-1, 0, 0) instead of (1, 0, 0). If we want the coordinates (1, 0, 0), R01</p><p>should be 1 (and not -1). In that case we would get for R:</p><p>$$R_z=
\begin{bmatrix}
\cos(-{\pi \over 2}) & \sin(-{\pi \over 2}) & 0 \\ -\sin(-{\pi \over 2}) & \cos(-{\pi \over 2}) & 0 \\ 0 & 0 & 1 \\ \end{bmatrix}=
\begin{bmatrix}
0 & -1 & 0 \\ 1 & 0 & 0 \\ 0 & 0 & 1 \\ \end{bmatrix}$$</p><p>$$\begin{array}{lll}
P_T.x = &0 * R_{00} &+& 1 * R_{10} &+& P.z * R_{20} &= \\ &0<em>0 &+& 1</em>1 &+& 0<em>0&=1\\ P_T.y = &0 * R_{01} &+& 1 * R_{11} &+& P.z * R_{21} &= \\ &0</em>-1 &+& 1<em>0 &+& 0</em>0&= 0\\ P_T.z = &0 * R_{02} &+& 1 * R_{12} &+& P.z * R_{22} &= \\ &0<em>0 &+& 1</em>0 &+& 0*1&= 0\\ \end{array}$$</p><p><img src=https://www.scratchapixel.com/images/upload/geometry/rotationmin90.png? width=auto alt></p><p>Figure 4: a 90 degrees clockwise rotation.</p><p>We know that the points in the xy plane should stay in the xy plane if we rotate them around the z-axis (so our rotation matrix Rz should not affect the z-coordinate of PT). When we look at the code transforming P to PT, it is easy to see that the third row and the third column do not affect the computation of PT. The first two coefficients in the third column which are used to compute a value for PT.z, R02 and R12, are set to 0 and the third one, R22, is set to 1 which multiplied by P.z leaves the value of P.z</p><p>unchanged. We can conclude that the matrix generating a rotation of a point/vector around the z-axis has the following form:</p><p>$$R_z(\theta)= \begin{bmatrix} \cos(\theta) & \sin(\theta) & 0 \\ -\sin(\theta) & \cos(\theta) & 0 \\ 0 & 0 & 1 \\ \end{bmatrix}$$</p><p>To find the matrices that could rotate a point around the x and y axis (or in the yz and xz planes) we can simply follow the same logic we used to find the matrix that rotates points and vectors around the z-axis (on in the xy plane). We will leave this to you as an exercise but considering the information we have given for finding Rz, that should be fairly simple. If Rx is the matrix that generates a rotation around the x-axis and Ry is the matrix that generates a rotation around the y-axis, here is what these matrices look like:</p><p>$$R_x(\theta)= \begin{bmatrix}
1 & 0 & 0 \\ 0 & \cos(\theta) & \sin(\theta) \\ 0 & -\sin(\theta) & \cos(\theta) \\ \end{bmatrix}$$</p><p>$$R_y(\theta)= \begin{bmatrix}
\cos(\theta) & 0 & -\sin(\theta) \\ 0 & 1 & 0 \\ \sin(\theta) & 0 & \cos(\theta) \\ \end{bmatrix}$$</p><p>$$R_z(\theta)= \begin{bmatrix} \cos(\theta) & \sin(\theta) & 0 \\ -\sin(\theta) & \cos(\theta) & 0 \\ 0 & 0 & 1 \\ \end{bmatrix}$$</p><p>Remember that you multiply the point&rsquo;s coordinates by the coefficients contained in each <strong>column</strong> of these matrices to compute the x, y and z coordinates of the transformed point.</p><p><img src=https://www.scratchapixel.com/images/upload/geometry/rotation2.png? width=auto alt></p><p>Figure 5: rotations around the x- y- and z-axis. The arrow indicates the rotation direction for positive angles.</p><p><img src=https://www.scratchapixel.com/images/upload/geometry/rothand.png? width=auto alt></p><p>Figure 6: if you use a left hand coordinate system (left) wrap your fingers around the axis of rotation to find in which direction positive rotation values will rotate points and vectors. If you use a right-hand coordinate system, use the same procedure using your right hand instead.</p><p>You can also use the mnemonic technique we have described in the chapter on coordinate system to easily find out in which directions point or vectors will rotate if the angle of rotation is positive. For a right-hand coordinate system, wrap your fingers around the axis of rotation (like showed in figure 6) and they will naturally indicate the direction in which positive rotation values rotates vectors and points (positive rotation is counter-clockwise). For a left-hand coordinate system, repeat the procedure but use your left hand instead (positive rotation is clockwise).</p><a href=#combining-rotation-matrices><h2 id=combining-rotation-matrices><span class=hanchor arialabel=Anchor># </span>Combining (Rotation) Matrices</h2></a><p>We have learned in the previous chapter that multiplying matrices together combines their transformations. Now that we know how to rotate points around individual axis, it is possible to multiply $Rx, Ry, Rz$ together (using every possible combinations) to create more complex rotations. If for instance you want to rotate a point around the x-axis, and then the y-axis, we can create two matrices using the matrices Rx and Ry and combine them using matrix multiplication $(Rx*Ry)$ to create a $Rxy$ matrix encoding the two individual rotations:</p><p>$RXY=RXâˆ—RY$</p><p>Note that the order of rotation is important and makes a difference. If you rotate a point around the x-axis first and then the y-axis second, you will end up (in most cases) with a result which is different from a rotation around the y-axis then around the x-axis. In most 3D packages such as Maya, 3DSMax, Softimage, Houdini, etc. it is possible to specify the order in which the rotations takes place. For instance the order can be $xyz$, &mldr; (see in Maya the list of possible options).</p><a href=#the-translation-matrix><h2 id=the-translation-matrix><span class=hanchor arialabel=Anchor># </span>The Translation Matrix</h2></a><p>To translate points using point-matrix multiplication we need to use [4x4] matrices. This chapter being limited to [3x3] matrices, we will explain how translation works with matrices in the chapter Transforming Points and Vectors.</p><a href=#rotation-around-an-arbitrary-axis><h2 id=rotation-around-an-arbitrary-axis><span class=hanchor arialabel=Anchor># </span>Rotation around an Arbitrary Axis</h2></a><p>It is possible to write some code that will rotate a point or a vector around an arbitrary axis. However this is won&rsquo;t be necessary to write a basic raytracer and we will develop this topic in a future revision of this lesson after the other basic lessons are completed.</p><p><a href=https://www.scratchapixel.com/lessons/mathematics-physics-for-computer-graphics/geometry/matrices rel=noopener>_arrow_back_Previous Chapter</a></p><p>Chapter 5 of 13</p><p><a href=https://www.scratchapixel.com/lessons/mathematics-physics-for-computer-graphics/geometry/how-does-matrix-work-part-2 rel=noopener>Next Chapter</a></p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/notes/3D-Modeling/blender/Sources/Scratchpixel/Scratchpixel-Home/ data-ctx="notes/3D-Modeling/blender/Sources/Scratchpixel/How Matricies Work - scratchpixel" data-src=/notes/3D-Modeling/blender/Sources/Scratchpixel/Scratchpixel-Home class=internal-link>{{title}}</a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://notes.benshurts.com/js/graph.abd4bc2af3869a96524d7d23b76152c7.js></script></div></div><div id=contact_buttons><footer><p>Made by Ben Shurts using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, Â© 2023</p><ul><li><a href=https://notes.benshurts.com/>Home</a></li><li><a href=https://twitter.com/artofbenshurts>Twitter</a></li><li><a href=https://github.com/benshurts>Github</a></li></ul></footer></div></div></body></html>