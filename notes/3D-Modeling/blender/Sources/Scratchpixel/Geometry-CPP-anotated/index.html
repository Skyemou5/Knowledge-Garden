<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="This program illustrates how the concept of vector and matrix can be implemented in C++. This is a light version of the implementation."><title>{{title}}</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://notes.benshurts.com//icon.png><link href=https://notes.benshurts.com/styles.708c2658f93e3a9d323a1f9fded8f4b2.min.css rel=stylesheet><link href=https://notes.benshurts.com/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://notes.benshurts.com/js/darkmode.7f1fd235efdec6a4bdcb4d8d99113082.min.js></script>
<script src=https://notes.benshurts.com/js/util.9825137f5e7825e8553c68ce39ac9e44.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://notes.benshurts.com/js/popover.9b72b70bd35617d0635e9d15463662b2.min.js></script>
<script src=https://notes.benshurts.com/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://notes.benshurts.com/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script>
<script src=https://notes.benshurts.com/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const BASE_URL="https://notes.benshurts.com/",fetchData=Promise.all([fetch("https://notes.benshurts.com/indices/linkIndex.90c56e84942c5c795fb01cde3e94cdb0.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://notes.benshurts.com/indices/contentIndex.11f29786553014e34567da916233da2c.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://notes.benshurts.com",!0,!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://notes.benshurts.com",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'â€™':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/notes.benshurts.com\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://notes.benshurts.com/js/full-text-search.24827f874defbbc6d529926cbfcfb493.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://notes.benshurts.com/>Knowledge Garden</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>{{title}}</h1><p class=meta>Last updated
Oct 27, 2022
<a href=https://github.com/benshurts/Knowledge-Garden/notes/3D-Modeling/blender/Sources/Scratchpixel/Geometry%20CPP%20anotated.md rel=noopener>Edit Source</a></p><ul class=tags></ul><p>This program illustrates how the concept of vector and matrix can be implemented in C++. This is a light version of the implementation. It contains the most essential methods to manipulate vectors and matrices. It should be enough for most projects. Vectors and matrices are really the alphabet as we said in the lesson of any graphics application. It&rsquo;s really important you feel confortable with these techniques especially with the concepts of normalizing vectors, computing their length, computing the dot and cross products of two vectors, and the point- and vector-matrix multiplication (and knowing the difference between the two).</p><p>Instructions to compile this program:<br>c++ geometry.cpp -o geometry -std=c++11</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;cstdlib&gt;  </span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;cstdio&gt;  </span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;  </span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;iomanip&gt;  </span><span class=cp>
</span></span></span></code></pre></td></tr></table></div></div><p>Implementation of a generic vector class - it will be used to deal with 3D points, vectors and normals. The class is implemented as a template. While it may complicate the code a bit, it gives us the flexibility later, to specialize the type of the coordinates into anything we want. For example: Vec3f if we want the coordinates to be floats or Vec3i if we want the coordinates to be integers. Vec3 is a standard/common way of naming vectors, points, etc. The OpenEXR and Autodesk libraries use this convention for instance.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span>  
</span></span><span class=line><span class=cl><span class=o>**</span><span class=k>class</span><span class=err>** </span><span class=nc>Vec3</span>  
</span></span><span class=line><span class=cl><span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>public</span><span class=o>**:</span>  
</span></span><span class=line><span class=cl>	<span class=n>Vec3</span><span class=p>()</span> <span class=o>:</span> <span class=n>x</span><span class=p>(</span><span class=mi>0</span><span class=p>),</span> <span class=n>y</span><span class=p>(</span><span class=mi>0</span><span class=p>),</span> <span class=n>z</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span> <span class=p>{}</span>  
</span></span><span class=line><span class=cl>	<span class=n>Vec3</span><span class=p>(</span><span class=n>T</span> <span class=n>xx</span><span class=p>)</span> <span class=o>:</span> <span class=n>x</span><span class=p>(</span><span class=n>xx</span><span class=p>),</span> <span class=n>y</span><span class=p>(</span><span class=n>xx</span><span class=p>),</span> <span class=n>z</span><span class=p>(</span><span class=n>xx</span><span class=p>)</span> <span class=p>{}</span>  
</span></span><span class=line><span class=cl>	<span class=n>Vec3</span><span class=p>(</span><span class=n>T</span> <span class=n>xx</span><span class=p>,</span> <span class=n>T</span> <span class=n>yy</span><span class=p>,</span> <span class=n>T</span> <span class=n>zz</span><span class=p>)</span> <span class=o>:</span> <span class=n>x</span><span class=p>(</span><span class=n>xx</span><span class=p>),</span> <span class=n>y</span><span class=p>(</span><span class=n>yy</span><span class=p>),</span> <span class=n>z</span><span class=p>(</span><span class=n>zz</span><span class=p>)</span> <span class=p>{}</span>  
</span></span><span class=line><span class=cl>	<span class=n>Vec3</span> <span class=k>operator</span> <span class=o>+</span> <span class=p>(</span><span class=o>**</span><span class=k>const</span><span class=o>**</span> <span class=n>Vec3</span> <span class=o>&amp;</span><span class=n>v</span><span class=p>)</span> <span class=o>**</span><span class=k>const</span><span class=o>**</span>  
</span></span><span class=line><span class=cl>	<span class=p>{</span> <span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=nf>Vec3</span><span class=p>(</span><span class=n>x</span> <span class=o>+</span> <span class=n>v</span><span class=p>.</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=o>+</span> <span class=n>v</span><span class=p>.</span><span class=n>y</span><span class=p>,</span> <span class=n>z</span> <span class=o>+</span> <span class=n>v</span><span class=p>.</span><span class=n>z</span><span class=p>);</span> <span class=p>}</span>  
</span></span><span class=line><span class=cl>	<span class=n>Vec3</span> <span class=k>operator</span> <span class=o>-</span> <span class=p>(</span><span class=o>**</span><span class=k>const</span><span class=o>**</span> <span class=n>Vec3</span> <span class=o>&amp;</span><span class=n>v</span><span class=p>)</span> <span class=o>**</span><span class=k>const</span><span class=o>**</span>  
</span></span><span class=line><span class=cl>	<span class=p>{</span> <span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=nf>Vec3</span><span class=p>(</span><span class=n>x</span> <span class=o>-</span> <span class=n>v</span><span class=p>.</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=o>-</span> <span class=n>v</span><span class=p>.</span><span class=n>y</span><span class=p>,</span> <span class=n>z</span> <span class=o>-</span> <span class=n>v</span><span class=p>.</span><span class=n>z</span><span class=p>);</span> <span class=p>}</span>  
</span></span><span class=line><span class=cl>	<span class=n>Vec3</span> <span class=k>operator</span> <span class=o>*</span> <span class=p>(</span><span class=o>**</span><span class=k>const</span><span class=o>**</span> <span class=n>T</span> <span class=o>&amp;</span><span class=n>r</span><span class=p>)</span> <span class=o>**</span><span class=k>const</span><span class=o>**</span>  
</span></span><span class=line><span class=cl>	<span class=p>{</span> <span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=nf>Vec3</span><span class=p>(</span><span class=n>x</span> <span class=o>*</span> <span class=n>r</span><span class=p>,</span> <span class=n>y</span> <span class=o>*</span> <span class=n>r</span><span class=p>,</span> <span class=n>z</span> <span class=o>*</span> <span class=n>r</span><span class=p>);</span> <span class=p>}</span>  
</span></span><span class=line><span class=cl>	<span class=n>T</span> <span class=nf>dotProduct</span><span class=p>(</span><span class=o>**</span><span class=k>const</span><span class=o>**</span> <span class=n>Vec3</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>v</span><span class=p>)</span> <span class=o>**</span><span class=k>const</span><span class=o>**</span>  
</span></span><span class=line><span class=cl>	<span class=p>{</span> <span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=n>x</span> <span class=o>*</span> <span class=n>v</span><span class=p>.</span><span class=n>x</span> <span class=o>+</span> <span class=n>y</span> <span class=o>*</span> <span class=n>v</span><span class=p>.</span><span class=n>y</span> <span class=o>+</span> <span class=n>z</span> <span class=o>*</span> <span class=n>v</span><span class=p>.</span><span class=n>z</span><span class=p>;</span> <span class=p>}</span>  
</span></span><span class=line><span class=cl>	<span class=n>T</span> <span class=nf>crossProduct</span><span class=p>(</span><span class=o>**</span><span class=k>const</span><span class=o>**</span> <span class=n>Vec3</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>v</span><span class=p>)</span> <span class=o>**</span><span class=k>const</span><span class=o>**</span>  
</span></span><span class=line><span class=cl>	<span class=p>{</span> <span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=n>Vec3</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span><span class=p>(</span><span class=n>y</span> <span class=o>*</span> <span class=n>v</span><span class=p>.</span><span class=n>z</span> <span class=o>-</span> <span class=n>z</span> <span class=o>*</span> <span class=n>v</span><span class=p>.</span><span class=n>y</span><span class=p>,</span> <span class=n>z</span> <span class=o>*</span> <span class=n>v</span><span class=p>.</span><span class=n>x</span> <span class=o>-</span> <span class=n>x</span> <span class=o>*</span> <span class=n>v</span><span class=p>.</span><span class=n>z</span><span class=p>,</span> <span class=n>x</span> <span class=o>*</span> <span class=n>v</span><span class=p>.</span><span class=n>y</span> <span class=o>-</span> <span class=n>y</span> <span class=o>*</span> <span class=n>v</span><span class=p>.</span><span class=n>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=n>T</span> <span class=nf>norm</span><span class=p>()</span> <span class=o>**</span><span class=k>const</span><span class=o>**</span>  
</span></span><span class=line><span class=cl><span class=p>{</span> <span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=n>x</span> <span class=o>*</span> <span class=n>x</span> <span class=o>+</span> <span class=n>y</span> <span class=o>*</span> <span class=n>y</span> <span class=o>+</span> <span class=n>z</span> <span class=o>*</span> <span class=n>z</span><span class=p>;</span> <span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=n>T</span> <span class=nf>length</span><span class=p>()</span> <span class=o>**</span><span class=k>const</span><span class=o>**</span>  
</span></span><span class=line><span class=cl><span class=p>{</span> <span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=n>sqrt</span><span class=p>(</span><span class=n>norm</span><span class=p>());</span> <span class=p>}</span>  
</span></span></code></pre></td></tr></table></div></div><p>The next two operators are sometimes called access operators or accessors. The Vec coordinates can be accessed that way v[0], v[1], v[2], rather than using the more traditional form v.x, v.y, v.z. This useful when vectors are used in loops: the coordinates can be accessed with the loop index (e.g. v[i]).</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=o>**</span><span class=k>const</span><span class=o>**</span> <span class=n>T</span><span class=o>&amp;</span> <span class=k>operator</span> <span class=p>[]</span> <span class=p>(</span><span class=kt>uint8_t</span> <span class=n>i</span><span class=p>)</span> <span class=o>**</span><span class=k>const</span><span class=o>**</span> <span class=p>{</span> <span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=p>(</span><span class=o>&amp;</span><span class=n>x</span><span class=p>)[</span><span class=n>i</span><span class=p>];</span> <span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=n>T</span><span class=o>&amp;</span> <span class=k>operator</span> <span class=p>[]</span> <span class=p>(</span><span class=kt>uint8_t</span> <span class=n>i</span><span class=p>)</span> <span class=p>{</span> <span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=p>(</span><span class=o>&amp;</span><span class=n>x</span><span class=p>)[</span><span class=n>i</span><span class=p>];</span> <span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=n>Vec3</span><span class=o>&amp;</span> <span class=n>normalize</span><span class=p>()</span>  
</span></span><span class=line><span class=cl><span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=n>T</span> <span class=n>n</span> <span class=o>=</span> <span class=n>norm</span><span class=p>();</span>  
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>if</span><span class=o>**</span> <span class=p>(</span><span class=n>n</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=n>T</span> <span class=n>factor</span> <span class=o>=</span> <span class=mi>1</span> <span class=o>/</span> <span class=n>sqrt</span><span class=p>(</span><span class=n>n</span><span class=p>);</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span> <span class=o>*=</span> <span class=n>factor</span><span class=p>,</span> <span class=n>y</span> <span class=o>*=</span> <span class=n>factor</span><span class=p>,</span> <span class=n>z</span> <span class=o>*=</span> <span class=n>factor</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=o>*</span><span class=k>this</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=k>friend</span> <span class=n>std</span><span class=o>::</span><span class=n>ostream</span><span class=o>&amp;</span> <span class=k>operator</span> <span class=o>&lt;&lt;</span> <span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>ostream</span> <span class=o>&amp;</span><span class=n>s</span><span class=p>,</span> <span class=o>**</span><span class=k>const</span><span class=o>**</span> <span class=n>Vec3</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>v</span><span class=p>)</span>  
</span></span><span class=line><span class=cl><span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=n>s</span> <span class=o>&lt;&lt;</span> <span class=sc>&#39;(&#39;</span> <span class=o>&lt;&lt;</span> <span class=n>v</span><span class=p>.</span><span class=n>x</span> <span class=o>&lt;&lt;</span> <span class=sc>&#39; &#39;</span> <span class=o>&lt;&lt;</span> <span class=n>v</span><span class=p>.</span><span class=n>y</span> <span class=o>&lt;&lt;</span> <span class=sc>&#39; &#39;</span> <span class=o>&lt;&lt;</span> <span class=n>v</span><span class=p>.</span><span class=n>z</span> <span class=o>&lt;&lt;</span> <span class=sc>&#39;)&#39;</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=n>T</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=p>};</span>  
</span></span></code></pre></td></tr></table></div></div><p>Now you can specialize the class. We are just showing two examples here. In your code you can declare a vector either that way: <code>Vec3&lt;float></code> a, or that way Vec3f a</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>typedef</span> <span class=n>Vec3</span><span class=o>&lt;</span><span class=kt>float</span><span class=o>&gt;</span> <span class=n>Vec3f</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=n>Vec3</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>Vec3i</span><span class=p>;</span>  
</span></span></code></pre></td></tr></table></div></div><p>Implementation of a generic 4x4 Matrix class - Same thing here than with the Vec3 class. It uses a template which is maybe less useful than with vectors but it can be used to define the coefficients of the matrix to be either floats (the most case) or doubles depending on our needs. To use you can either write: <code>Matrix44&lt;float></code> m; or: Matrix44f m;</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span>  
</span></span><span class=line><span class=cl><span class=o>**</span><span class=k>class</span><span class=err>** </span><span class=nc>Matrix44</span>  
</span></span><span class=line><span class=cl><span class=p>{</span>  
</span></span><span class=line><span class=cl><span class=o>**</span><span class=k>public</span><span class=o>**:</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=n>T</span> <span class=n>x</span><span class=p>[</span><span class=mi>4</span><span class=p>][</span><span class=mi>4</span><span class=p>]</span> <span class=o>=</span> <span class=p>{{</span><span class=mi>1</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>},{</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>},{</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>,</span><span class=mi>0</span><span class=p>},{</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>}};</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=n>Matrix44</span><span class=p>()</span> <span class=p>{}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=n>Matrix44</span> <span class=p>(</span><span class=n>T</span> <span class=n>a</span><span class=p>,</span> <span class=n>T</span> <span class=n>b</span><span class=p>,</span> <span class=n>T</span> <span class=n>c</span><span class=p>,</span> <span class=n>T</span> <span class=n>d</span><span class=p>,</span> <span class=n>T</span> <span class=n>e</span><span class=p>,</span> <span class=n>T</span> <span class=n>f</span><span class=p>,</span> <span class=n>T</span> <span class=n>g</span><span class=p>,</span> <span class=n>T</span> <span class=n>h</span><span class=p>,</span>  
</span></span><span class=line><span class=cl><span class=n>T</span> <span class=n>i</span><span class=p>,</span> <span class=n>T</span> <span class=n>j</span><span class=p>,</span> <span class=n>T</span> <span class=n>k</span><span class=p>,</span> <span class=n>T</span> <span class=n>l</span><span class=p>,</span> <span class=n>T</span> <span class=n>m</span><span class=p>,</span> <span class=n>T</span> <span class=n>n</span><span class=p>,</span> <span class=n>T</span> <span class=n>o</span><span class=p>,</span> <span class=n>T</span> <span class=n>p</span><span class=p>)</span>  
</span></span><span class=line><span class=cl><span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>a</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>b</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>2</span><span class=p>]</span> <span class=o>=</span> <span class=n>c</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>3</span><span class=p>]</span> <span class=o>=</span> <span class=n>d</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>e</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>f</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>2</span><span class=p>]</span> <span class=o>=</span> <span class=n>g</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>3</span><span class=p>]</span> <span class=o>=</span> <span class=n>h</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>j</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>2</span><span class=p>]</span> <span class=o>=</span> <span class=n>k</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>3</span><span class=p>]</span> <span class=o>=</span> <span class=n>l</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>m</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>n</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>2</span><span class=p>]</span> <span class=o>=</span> <span class=n>o</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>3</span><span class=p>]</span> <span class=o>=</span> <span class=n>p</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=o>**</span><span class=k>const</span><span class=o>**</span> <span class=n>T</span><span class=o>*</span> <span class=k>operator</span> <span class=p>[]</span> <span class=p>(</span><span class=kt>uint8_t</span> <span class=n>i</span><span class=p>)</span> <span class=o>**</span><span class=k>const</span><span class=o>**</span> <span class=p>{</span> <span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=n>x</span><span class=p>[</span><span class=n>i</span><span class=p>];</span> <span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=n>T</span><span class=o>*</span> <span class=k>operator</span> <span class=p>[]</span> <span class=p>(</span><span class=kt>uint8_t</span> <span class=n>i</span><span class=p>)</span> <span class=p>{</span> <span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=n>x</span><span class=p>[</span><span class=n>i</span><span class=p>];</span> <span class=p>}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=c1>// Multiply the current matrix with another matrix (rhs)  
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Matrix44</span> <span class=k>operator</span> <span class=o>*</span> <span class=p>(</span><span class=o>**</span><span class=k>const</span><span class=o>**</span> <span class=n>Matrix44</span><span class=o>&amp;</span> <span class=n>v</span><span class=p>)</span> <span class=o>**</span><span class=k>const</span><span class=o>**</span>  
</span></span><span class=line><span class=cl><span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=n>Matrix44</span> <span class=n>tmp</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>multiply</span> <span class=p>(</span><span class=o>*</span><span class=k>this</span><span class=p>,</span> <span class=n>v</span><span class=p>,</span> <span class=n>tmp</span><span class=p>);</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=n>tmp</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span></code></pre></td></tr></table></div></div><p>To make it easier to understand how a matrix multiplication works, the fragment of code included within the #if-#else statement, show how this works if you were to iterate over the coefficients of the resulting matrix (a). However you will often see this multiplication being done using the code contained within the #else-#end statement. It is exactly the same as the first fragment only we have litteraly written down as a series of operations what would actually result from executing the two for() loops contained in the first fragment. It is supposed to be faster, however considering matrix multiplicatin is not necessarily that common, this is probably not super useful nor really necessary (but nice to have &ndash; and it gives you an example of how it can be done, as this how you will this operation implemented in most libraries).</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>static</span> <span class=kt>void</span> <span class=nf>multiply</span><span class=p>(</span><span class=o>**</span><span class=k>const</span><span class=o>**</span> <span class=n>Matrix44</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>a</span><span class=p>,</span> <span class=o>**</span><span class=k>const</span><span class=o>**</span> <span class=n>Matrix44</span><span class=o>&amp;</span> <span class=n>b</span><span class=p>,</span> <span class=n>Matrix44</span> <span class=o>&amp;</span><span class=n>c</span><span class=p>)</span>  
</span></span><span class=line><span class=cl><span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=err>#</span><span class=k>if</span> <span class=mi>0</span>  
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>for</span><span class=o>**</span> <span class=p>(</span><span class=kt>uint8_t</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>4</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>for</span><span class=o>**</span> <span class=p>(</span><span class=kt>uint8_t</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=mi>4</span><span class=p>;</span> <span class=o>++</span><span class=n>j</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=n>c</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>a</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>*</span> <span class=n>b</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span> <span class=n>a</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>*</span> <span class=n>b</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span>  
</span></span><span class=line><span class=cl>	<span class=n>a</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>2</span><span class=p>]</span> <span class=o>*</span> <span class=n>b</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>+</span> <span class=n>a</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>3</span><span class=p>]</span> <span class=o>*</span> <span class=n>b</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl>	<span class=err>#</span><span class=k>else</span>  
</span></span><span class=line><span class=cl>	<span class=c1>// A restric qualified pointer (or reference) is basically a promise  
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=c1>// to the compiler that for the scope of the pointer, the target of the  
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=c1>// pointer will only be accessed through that pointer (and pointers  
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=c1>// copied from it.  
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=o>**</span><span class=k>const</span><span class=o>**</span> <span class=n>T</span> <span class=o>*</span> <span class=n>__restrict</span> <span class=n>ap</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>a</span><span class=p>.</span><span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>const</span><span class=o>**</span> <span class=n>T</span> <span class=o>*</span> <span class=n>__restrict</span> <span class=n>bp</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>b</span><span class=p>.</span><span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>T</span> <span class=o>*</span> <span class=n>__restrict</span> <span class=n>cp</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>c</span><span class=p>.</span><span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>T</span> <span class=n>a0</span><span class=p>,</span> <span class=n>a1</span><span class=p>,</span> <span class=n>a2</span><span class=p>,</span> <span class=n>a3</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>a0</span> <span class=o>=</span> <span class=n>ap</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>a1</span> <span class=o>=</span> <span class=n>ap</span><span class=p>[</span><span class=mi>1</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>a2</span> <span class=o>=</span> <span class=n>ap</span><span class=p>[</span><span class=mi>2</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>a3</span> <span class=o>=</span> <span class=n>ap</span><span class=p>[</span><span class=mi>3</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>cp</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>a0</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>+</span> <span class=n>a1</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>4</span><span class=p>]</span> <span class=o>+</span> <span class=n>a2</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>8</span><span class=p>]</span> <span class=o>+</span> <span class=n>a3</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>12</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>cp</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>a0</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>a1</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>5</span><span class=p>]</span> <span class=o>+</span> <span class=n>a2</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>9</span><span class=p>]</span> <span class=o>+</span> <span class=n>a3</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>13</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>cp</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>=</span> <span class=n>a0</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>+</span> <span class=n>a1</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>6</span><span class=p>]</span> <span class=o>+</span> <span class=n>a2</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>10</span><span class=p>]</span> <span class=o>+</span> <span class=n>a3</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>14</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>cp</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span> <span class=o>=</span> <span class=n>a0</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span> <span class=o>+</span> <span class=n>a1</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>7</span><span class=p>]</span> <span class=o>+</span> <span class=n>a2</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>11</span><span class=p>]</span> <span class=o>+</span> <span class=n>a3</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>15</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>a0</span> <span class=o>=</span> <span class=n>ap</span><span class=p>[</span><span class=mi>4</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>a1</span> <span class=o>=</span> <span class=n>ap</span><span class=p>[</span><span class=mi>5</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>a2</span> <span class=o>=</span> <span class=n>ap</span><span class=p>[</span><span class=mi>6</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>a3</span> <span class=o>=</span> <span class=n>ap</span><span class=p>[</span><span class=mi>7</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>cp</span><span class=p>[</span><span class=mi>4</span><span class=p>]</span> <span class=o>=</span> <span class=n>a0</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>+</span> <span class=n>a1</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>4</span><span class=p>]</span> <span class=o>+</span> <span class=n>a2</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>8</span><span class=p>]</span> <span class=o>+</span> <span class=n>a3</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>12</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>cp</span><span class=p>[</span><span class=mi>5</span><span class=p>]</span> <span class=o>=</span> <span class=n>a0</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>a1</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>5</span><span class=p>]</span> <span class=o>+</span> <span class=n>a2</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>9</span><span class=p>]</span> <span class=o>+</span> <span class=n>a3</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>13</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>cp</span><span class=p>[</span><span class=mi>6</span><span class=p>]</span> <span class=o>=</span> <span class=n>a0</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>+</span> <span class=n>a1</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>6</span><span class=p>]</span> <span class=o>+</span> <span class=n>a2</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>10</span><span class=p>]</span> <span class=o>+</span> <span class=n>a3</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>14</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>cp</span><span class=p>[</span><span class=mi>7</span><span class=p>]</span> <span class=o>=</span> <span class=n>a0</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span> <span class=o>+</span> <span class=n>a1</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>7</span><span class=p>]</span> <span class=o>+</span> <span class=n>a2</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>11</span><span class=p>]</span> <span class=o>+</span> <span class=n>a3</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>15</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>a0</span> <span class=o>=</span> <span class=n>ap</span><span class=p>[</span><span class=mi>8</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>a1</span> <span class=o>=</span> <span class=n>ap</span><span class=p>[</span><span class=mi>9</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>a2</span> <span class=o>=</span> <span class=n>ap</span><span class=p>[</span><span class=mi>10</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>a3</span> <span class=o>=</span> <span class=n>ap</span><span class=p>[</span><span class=mi>11</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>cp</span><span class=p>[</span><span class=mi>8</span><span class=p>]</span> <span class=o>=</span> <span class=n>a0</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>+</span> <span class=n>a1</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>4</span><span class=p>]</span> <span class=o>+</span> <span class=n>a2</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>8</span><span class=p>]</span> <span class=o>+</span> <span class=n>a3</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>12</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>cp</span><span class=p>[</span><span class=mi>9</span><span class=p>]</span> <span class=o>=</span> <span class=n>a0</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>a1</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>5</span><span class=p>]</span> <span class=o>+</span> <span class=n>a2</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>9</span><span class=p>]</span> <span class=o>+</span> <span class=n>a3</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>13</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>cp</span><span class=p>[</span><span class=mi>10</span><span class=p>]</span> <span class=o>=</span> <span class=n>a0</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>+</span> <span class=n>a1</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>6</span><span class=p>]</span> <span class=o>+</span> <span class=n>a2</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>10</span><span class=p>]</span> <span class=o>+</span> <span class=n>a3</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>14</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>cp</span><span class=p>[</span><span class=mi>11</span><span class=p>]</span> <span class=o>=</span> <span class=n>a0</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span> <span class=o>+</span> <span class=n>a1</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>7</span><span class=p>]</span> <span class=o>+</span> <span class=n>a2</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>11</span><span class=p>]</span> <span class=o>+</span> <span class=n>a3</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>15</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>a0</span> <span class=o>=</span> <span class=n>ap</span><span class=p>[</span><span class=mi>12</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>a1</span> <span class=o>=</span> <span class=n>ap</span><span class=p>[</span><span class=mi>13</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>a2</span> <span class=o>=</span> <span class=n>ap</span><span class=p>[</span><span class=mi>14</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>a3</span> <span class=o>=</span> <span class=n>ap</span><span class=p>[</span><span class=mi>15</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>cp</span><span class=p>[</span><span class=mi>12</span><span class=p>]</span> <span class=o>=</span> <span class=n>a0</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>+</span> <span class=n>a1</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>4</span><span class=p>]</span> <span class=o>+</span> <span class=n>a2</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>8</span><span class=p>]</span> <span class=o>+</span> <span class=n>a3</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>12</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>cp</span><span class=p>[</span><span class=mi>13</span><span class=p>]</span> <span class=o>=</span> <span class=n>a0</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>a1</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>5</span><span class=p>]</span> <span class=o>+</span> <span class=n>a2</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>9</span><span class=p>]</span> <span class=o>+</span> <span class=n>a3</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>13</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>cp</span><span class=p>[</span><span class=mi>14</span><span class=p>]</span> <span class=o>=</span> <span class=n>a0</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>+</span> <span class=n>a1</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>6</span><span class=p>]</span> <span class=o>+</span> <span class=n>a2</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>10</span><span class=p>]</span> <span class=o>+</span> <span class=n>a3</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>14</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>cp</span><span class=p>[</span><span class=mi>15</span><span class=p>]</span> <span class=o>=</span> <span class=n>a0</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>3</span><span class=p>]</span> <span class=o>+</span> <span class=n>a1</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>7</span><span class=p>]</span> <span class=o>+</span> <span class=n>a2</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>11</span><span class=p>]</span> <span class=o>+</span> <span class=n>a3</span> <span class=o>*</span> <span class=n>bp</span><span class=p>[</span><span class=mi>15</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=err>#</span><span class=n>endif</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=c1>// \brief return a transposed copy of the current matrix as a new matrix  
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Matrix44</span> <span class=nf>transposed</span><span class=p>()</span> <span class=o>**</span><span class=k>const</span><span class=o>**</span>  
</span></span><span class=line><span class=cl><span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=err>#</span><span class=k>if</span> <span class=mi>0</span>  
</span></span><span class=line><span class=cl>	<span class=n>Matrix44</span> <span class=n>t</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>for</span><span class=o>**</span> <span class=p>(</span><span class=kt>uint8_t</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>4</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>for</span><span class=o>**</span> <span class=p>(</span><span class=kt>uint8_t</span> <span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=mi>4</span><span class=p>;</span> <span class=o>++</span><span class=n>j</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=n>t</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>x</span><span class=p>[</span><span class=n>j</span><span class=p>][</span><span class=n>i</span><span class=p>];</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=n>t</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=err>#</span><span class=k>else</span>  
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=n>Matrix44</span> <span class=p>(</span><span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>0</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>0</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>0</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>1</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>1</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>1</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>1</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>2</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>2</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>2</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>2</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>3</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>3</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>3</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>3</span><span class=p>]);</span>  
</span></span><span class=line><span class=cl>	<span class=err>#</span><span class=n>endif</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=c1>// \brief transpose itself  
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Matrix44</span><span class=o>&amp;</span> <span class=n>transpose</span> <span class=p>()</span>  
</span></span><span class=line><span class=cl><span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=n>Matrix44</span> <span class=nf>tmp</span> <span class=p>(</span><span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>0</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>0</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>0</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>1</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>1</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>1</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>1</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>2</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>2</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>2</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>2</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>3</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>3</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>3</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>	<span class=n>x</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>3</span><span class=p>]);</span>  
</span></span><span class=line><span class=cl>	<span class=o>*</span><span class=k>this</span> <span class=o>=</span> <span class=n>tmp</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=o>*</span><span class=k>this</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl>  
</span></span></code></pre></td></tr></table></div></div><p>This method needs to be used for point-matrix multiplication. Keep in mind we don&rsquo;t make the distinction between points and vectors at least from a programming point of view, as both (as well as normals) are declared as Vec3. However, mathematically they need to be treated differently. Points can be translated when translation for vectors is meaningless. Furthermore, points are implicitly be considered as having homogeneous coordinates. Thus the w coordinates needs to be computed and to convert the coordinates from homogeneous back to Cartesian coordinates, we need to divided x, y z by w. The coordinate w is more often than not equals to 1, but it can be different than 1 especially when the matrix is projective matrix (perspective projection matrix).</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>S</span><span class=o>&gt;</span>  
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=n>multVecMatrix</span><span class=p>(</span><span class=o>**</span><span class=k>const</span><span class=o>**</span> <span class=n>Vec3</span><span class=o>&lt;</span><span class=n>S</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>src</span><span class=p>,</span> <span class=n>Vec3</span><span class=o>&lt;</span><span class=n>S</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>dst</span><span class=p>)</span> <span class=o>**</span><span class=k>const</span><span class=o>**</span>  
</span></span><span class=line><span class=cl><span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=n>S</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span><span class=p>,</span> <span class=n>w</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>a</span> <span class=o>=</span> <span class=n>src</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>+</span> <span class=n>src</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>+</span> <span class=n>src</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>+</span> <span class=n>x</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>0</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>b</span> <span class=o>=</span> <span class=n>src</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>src</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>src</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>x</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>1</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>c</span> <span class=o>=</span> <span class=n>src</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>2</span><span class=p>]</span> <span class=o>+</span> <span class=n>src</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>2</span><span class=p>]</span> <span class=o>+</span> <span class=n>src</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>2</span><span class=p>]</span> <span class=o>+</span> <span class=n>x</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>2</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>w</span> <span class=o>=</span> <span class=n>src</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>3</span><span class=p>]</span> <span class=o>+</span> <span class=n>src</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>3</span><span class=p>]</span> <span class=o>+</span> <span class=n>src</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>3</span><span class=p>]</span> <span class=o>+</span> <span class=n>x</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>3</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>dst</span><span class=p>.</span><span class=n>x</span> <span class=o>=</span> <span class=n>a</span> <span class=o>/</span> <span class=n>w</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>dst</span><span class=p>.</span><span class=n>y</span> <span class=o>=</span> <span class=n>b</span> <span class=o>/</span> <span class=n>w</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>dst</span><span class=p>.</span><span class=n>z</span> <span class=o>=</span> <span class=n>c</span> <span class=o>/</span> <span class=n>w</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span></code></pre></td></tr></table></div></div><p>This method needs to be used for vector-matrix multiplication. Look at the differences with the previous method (to compute a point-matrix multiplication). We don&rsquo;t use the coefficients in the matrix that account for translation (x[3][0], x[3][1], x[3][2]) and we don&rsquo;t compute w.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>template</span><span class=o>&lt;</span><span class=k>typename</span> <span class=n>S</span><span class=o>&gt;</span>  
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=n>multDirMatrix</span><span class=p>(</span><span class=o>**</span><span class=k>const</span><span class=o>**</span> <span class=n>Vec3</span><span class=o>&lt;</span><span class=n>S</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>src</span><span class=p>,</span> <span class=n>Vec3</span><span class=o>&lt;</span><span class=n>S</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>dst</span><span class=p>)</span> <span class=o>**</span><span class=k>const</span><span class=o>**</span>  
</span></span><span class=line><span class=cl><span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=n>S</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>a</span> <span class=o>=</span> <span class=n>src</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>+</span> <span class=n>src</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>+</span> <span class=n>src</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>0</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>b</span> <span class=o>=</span> <span class=n>src</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>src</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>+</span> <span class=n>src</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>1</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>c</span> <span class=o>=</span> <span class=n>src</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>2</span><span class=p>]</span> <span class=o>+</span> <span class=n>src</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>2</span><span class=p>]</span> <span class=o>+</span> <span class=n>src</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>*</span> <span class=n>x</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>2</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>dst</span><span class=p>.</span><span class=n>x</span> <span class=o>=</span> <span class=n>a</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>dst</span><span class=p>.</span><span class=n>y</span> <span class=o>=</span> <span class=n>b</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>dst</span><span class=p>.</span><span class=n>z</span> <span class=o>=</span> <span class=n>c</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span></code></pre></td></tr></table></div></div><p>Compute the inverse of the matrix using the Gauss-Jordan (or reduced row) elimination method. We didn&rsquo;t explain in the lesson on Geometry how the inverse of matrix can be found. Don&rsquo;t worry at this point if you don&rsquo;t understand how this works. But we will need to be able to compute the inverse of matrices in the first lessons of the &ldquo;Foundation of 3D Rendering&rdquo; section, which is why we&rsquo;ve added this code. For now, you can just use it and rely on it for doing what it&rsquo;s supposed to do. If you want to learn how this works though, check the lesson on called Matrix Inverse in the &ldquo;Mathematics and Physics of Computer Graphics&rdquo; section.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=n>Matrix44</span> <span class=nf>inverse</span><span class=p>()</span>  
</span></span><span class=line><span class=cl><span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=kt>int</span><span class=o>**</span> <span class=n>i</span><span class=p>,</span> <span class=n>j</span><span class=p>,</span> <span class=n>k</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>Matrix44</span> <span class=n>s</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>Matrix44</span> <span class=n>t</span> <span class=p>(</span><span class=o>*</span><span class=k>this</span><span class=p>);</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// Forward elimination  
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=o>**</span><span class=k>for</span><span class=o>**</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>3</span> <span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=kt>int</span><span class=o>**</span> <span class=n>pivot</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>T</span> <span class=n>pivotsize</span> <span class=o>=</span> <span class=n>t</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>i</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>if</span><span class=o>**</span> <span class=p>(</span><span class=n>pivotsize</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>	<span class=n>pivotsize</span> <span class=o>=</span> <span class=o>-</span><span class=n>pivotsize</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>for</span><span class=o>**</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=mi>4</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=n>T</span> <span class=n>tmp</span> <span class=o>=</span> <span class=n>t</span><span class=p>[</span><span class=n>j</span><span class=p>][</span><span class=n>i</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>if</span><span class=o>**</span> <span class=p>(</span><span class=n>tmp</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>)</span>  
</span></span><span class=line><span class=cl>	<span class=n>tmp</span> <span class=o>=</span> <span class=o>-</span><span class=n>tmp</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>if</span><span class=o>**</span> <span class=p>(</span><span class=n>tmp</span> <span class=o>&gt;</span> <span class=n>pivotsize</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=n>pivot</span> <span class=o>=</span> <span class=n>j</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>pivotsize</span> <span class=o>=</span> <span class=n>tmp</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=o>**</span><span class=k>if</span><span class=o>**</span> <span class=p>(</span><span class=n>pivotsize</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl><span class=c1>// Cannot invert singular matrix  
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=n>Matrix44</span><span class=p>();</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>if</span><span class=o>**</span> <span class=p>(</span><span class=n>pivot</span> <span class=o>!=</span> <span class=n>i</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>for</span><span class=o>**</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=mi>4</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=n>T</span> <span class=n>tmp</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>tmp</span> <span class=o>=</span> <span class=n>t</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>t</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>t</span><span class=p>[</span><span class=n>pivot</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>t</span><span class=p>[</span><span class=n>pivot</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>tmp</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>tmp</span> <span class=o>=</span> <span class=n>s</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>s</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>s</span><span class=p>[</span><span class=n>pivot</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>s</span><span class=p>[</span><span class=n>pivot</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>tmp</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>for</span><span class=o>**</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=mi>4</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=n>T</span> <span class=n>f</span> <span class=o>=</span> <span class=n>t</span><span class=p>[</span><span class=n>j</span><span class=p>][</span><span class=n>i</span><span class=p>]</span> <span class=o>/</span> <span class=n>t</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>i</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>for</span><span class=o>**</span> <span class=p>(</span><span class=n>k</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>k</span> <span class=o>&lt;</span> <span class=mi>4</span><span class=p>;</span> <span class=n>k</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=n>t</span><span class=p>[</span><span class=n>j</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>-=</span> <span class=n>f</span> <span class=o>*</span> <span class=n>t</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>s</span><span class=p>[</span><span class=n>j</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>-=</span> <span class=n>f</span> <span class=o>*</span> <span class=n>s</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>];</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// Backward substitution  
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=o>**</span><span class=k>for</span><span class=o>**</span> <span class=p>(</span><span class=n>i</span> <span class=o>=</span> <span class=mi>3</span><span class=p>;</span> <span class=n>i</span> <span class=o>&gt;=</span> <span class=mi>0</span><span class=p>;</span> <span class=o>--</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=n>T</span> <span class=n>f</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>if</span><span class=o>**</span> <span class=p>((</span><span class=n>f</span> <span class=o>=</span> <span class=n>t</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>i</span><span class=p>])</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=c1>// Cannot invert singular matrix  
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=n>Matrix44</span><span class=p>();</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>for</span><span class=o>**</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=mi>4</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=n>t</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>/=</span> <span class=n>f</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>s</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>/=</span> <span class=n>f</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>for</span><span class=o>**</span> <span class=p>(</span><span class=n>j</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>j</span> <span class=o>&lt;</span> <span class=n>i</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=n>f</span> <span class=o>=</span> <span class=n>t</span><span class=p>[</span><span class=n>j</span><span class=p>][</span><span class=n>i</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>for</span><span class=o>**</span> <span class=p>(</span><span class=n>k</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>k</span> <span class=o>&lt;</span> <span class=mi>4</span><span class=p>;</span> <span class=n>k</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=n>t</span><span class=p>[</span><span class=n>j</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>-=</span> <span class=n>f</span> <span class=o>*</span> <span class=n>t</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>];</span>  
</span></span><span class=line><span class=cl>	<span class=n>s</span><span class=p>[</span><span class=n>j</span><span class=p>][</span><span class=n>k</span><span class=p>]</span> <span class=o>-=</span> <span class=n>f</span> <span class=o>*</span> <span class=n>s</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>k</span><span class=p>];</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=n>s</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=c1>// \brief set current matrix to its inverse  
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>**</span><span class=k>const</span><span class=o>**</span> <span class=n>Matrix44</span><span class=o>&lt;</span><span class=n>T</span><span class=o>&gt;&amp;</span> <span class=n>invert</span><span class=p>()</span>  
</span></span><span class=line><span class=cl><span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=o>*</span><span class=k>this</span> <span class=o>=</span> <span class=n>inverse</span><span class=p>();</span>  
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=o>*</span><span class=k>this</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=k>friend</span> <span class=n>std</span><span class=o>::</span><span class=n>ostream</span><span class=o>&amp;</span> <span class=k>operator</span> <span class=o>&lt;&lt;</span> <span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>ostream</span> <span class=o>&amp;</span><span class=n>s</span><span class=p>,</span> <span class=o>**</span><span class=k>const</span><span class=o>**</span> <span class=n>Matrix44</span> <span class=o>&amp;</span><span class=n>m</span><span class=p>)</span>  
</span></span><span class=line><span class=cl><span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=n>std</span><span class=o>::</span><span class=n>ios_base</span><span class=o>::</span><span class=n>fmtflags</span> <span class=n>oldFlags</span> <span class=o>=</span> <span class=n>s</span><span class=p>.</span><span class=n>flags</span><span class=p>();</span>  
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=kt>int</span><span class=o>**</span> <span class=n>width</span> <span class=o>=</span> <span class=mi>12</span><span class=p>;</span> <span class=c1>// total with of the displayed number  
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=n>s</span><span class=p>.</span><span class=n>precision</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span> <span class=c1>// control the number of displayed decimals  
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=n>s</span><span class=p>.</span><span class=n>setf</span> <span class=p>(</span><span class=n>std</span><span class=o>::</span><span class=n>ios_base</span><span class=o>::</span><span class=n>fixed</span><span class=p>);</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>s</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;(&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>setw</span> <span class=p>(</span><span class=n>width</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>m</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>&lt;&lt;</span>  
</span></span><span class=line><span class=cl>	<span class=s>&#34; &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>setw</span> <span class=p>(</span><span class=n>width</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>m</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>&lt;&lt;</span>  
</span></span><span class=line><span class=cl>	<span class=s>&#34; &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>setw</span> <span class=p>(</span><span class=n>width</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>m</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>2</span><span class=p>]</span> <span class=o>&lt;&lt;</span>  
</span></span><span class=line><span class=cl>	<span class=s>&#34; &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>setw</span> <span class=p>(</span><span class=n>width</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>m</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>3</span><span class=p>]</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;</span><span class=se>\n</span><span class=s>&#34;</span> <span class=o>&lt;&lt;</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=s>&#34; &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>setw</span> <span class=p>(</span><span class=n>width</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>m</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>&lt;&lt;</span>  
</span></span><span class=line><span class=cl>	<span class=s>&#34; &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>setw</span> <span class=p>(</span><span class=n>width</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>m</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>&lt;&lt;</span>  
</span></span><span class=line><span class=cl>	<span class=s>&#34; &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>setw</span> <span class=p>(</span><span class=n>width</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>m</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>2</span><span class=p>]</span> <span class=o>&lt;&lt;</span>  
</span></span><span class=line><span class=cl>	<span class=s>&#34; &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>setw</span> <span class=p>(</span><span class=n>width</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>m</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>3</span><span class=p>]</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;</span><span class=se>\n</span><span class=s>&#34;</span> <span class=o>&lt;&lt;</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=s>&#34; &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>setw</span> <span class=p>(</span><span class=n>width</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>m</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>&lt;&lt;</span>  
</span></span><span class=line><span class=cl>	<span class=s>&#34; &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>setw</span> <span class=p>(</span><span class=n>width</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>m</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>&lt;&lt;</span>  
</span></span><span class=line><span class=cl>	<span class=s>&#34; &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>setw</span> <span class=p>(</span><span class=n>width</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>m</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>2</span><span class=p>]</span> <span class=o>&lt;&lt;</span>  
</span></span><span class=line><span class=cl>	<span class=s>&#34; &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>setw</span> <span class=p>(</span><span class=n>width</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>m</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=mi>3</span><span class=p>]</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;</span><span class=se>\n</span><span class=s>&#34;</span> <span class=o>&lt;&lt;</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=s>&#34; &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>setw</span> <span class=p>(</span><span class=n>width</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>m</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>0</span><span class=p>]</span> <span class=o>&lt;&lt;</span>  
</span></span><span class=line><span class=cl>	<span class=s>&#34; &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>setw</span> <span class=p>(</span><span class=n>width</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>m</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>1</span><span class=p>]</span> <span class=o>&lt;&lt;</span>  
</span></span><span class=line><span class=cl>	<span class=s>&#34; &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>setw</span> <span class=p>(</span><span class=n>width</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>m</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>2</span><span class=p>]</span> <span class=o>&lt;&lt;</span>  
</span></span><span class=line><span class=cl>	<span class=s>&#34; &#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>setw</span> <span class=p>(</span><span class=n>width</span><span class=p>)</span> <span class=o>&lt;&lt;</span> <span class=n>m</span><span class=p>[</span><span class=mi>3</span><span class=p>][</span><span class=mi>3</span><span class=p>]</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;)</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>s</span><span class=p>.</span><span class=n>flags</span> <span class=p>(</span><span class=n>oldFlags</span><span class=p>);</span>  
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=n>s</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span><span class=line><span class=cl><span class=p>};</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>	<span class=k>typedef</span> <span class=n>Matrix44</span><span class=o>&lt;</span><span class=kt>float</span><span class=o>&gt;</span> <span class=n>Matrix44f</span><span class=p>;</span>  
</span></span></code></pre></td></tr></table></div></div><p>Testing our code. To test the matrix inversion code, we used Maya to output the values of a matrix and its inverse (check the video at the top of this page). Of course this implies that Maya actually does the right thing, but we can probably agree, that is actually does;). These are the values for the input matrix: 0.707107 0 -0.707107 0 -0.331295 0.883452 -0.331295 0 0.624695 0.468521 0.624695 0 4.000574 3.00043 4.000574 1 Given the input matrix, the inverse matrix computed by our code should match the following values: 0.707107 -0.331295 0.624695 0 0 0.883452 0.468521 0 -0.707107 -0.331295 0.624695 0 0 0 -6.404043 1</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>**</span><span class=kt>int</span><span class=o>**</span> <span class=nf>main</span><span class=p>(</span><span class=o>**</span><span class=kt>int</span><span class=o>**</span> <span class=n>argc</span><span class=p>,</span> <span class=o>**</span><span class=kt>char</span><span class=o>**</span> <span class=o>**</span><span class=n>argv</span><span class=p>)</span>  
</span></span><span class=line><span class=cl><span class=p>{</span>  
</span></span><span class=line><span class=cl>	<span class=n>Vec3f</span> <span class=n>v</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>);</span>  
</span></span><span class=line><span class=cl>	<span class=n>std</span><span class=o>::</span><span class=n>cerr</span> <span class=o>&lt;&lt;</span> <span class=n>v</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>Matrix44f</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>c</span> <span class=o>=</span> <span class=n>a</span> <span class=o>*</span> <span class=n>b</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>Matrix44f</span> <span class=n>d</span><span class=p>(</span><span class=mf>0.707107</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=o>-</span><span class=mf>0.707107</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=o>-</span><span class=mf>0.331295</span><span class=p>,</span> <span class=mf>0.883452</span><span class=p>,</span> <span class=o>-</span><span class=mf>0.331295</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mf>0.624695</span><span class=p>,</span> <span class=mf>0.468521</span><span class=p>,</span> <span class=mf>0.624695</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mf>4.000574</span><span class=p>,</span> <span class=mf>3.00043</span><span class=p>,</span> <span class=mf>4.000574</span><span class=p>,</span> <span class=mi>1</span><span class=p>);</span>  
</span></span><span class=line><span class=cl>	<span class=n>std</span><span class=o>::</span><span class=n>cerr</span> <span class=o>&lt;&lt;</span> <span class=n>d</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>	<span class=n>d</span><span class=p>.</span><span class=n>invert</span><span class=p>();</span>  
</span></span><span class=line><span class=cl>	<span class=n>std</span><span class=o>::</span><span class=n>cerr</span> <span class=o>&lt;&lt;</span> <span class=n>d</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=o>**</span><span class=k>return</span><span class=o>**</span> <span class=mi>0</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/notes/3D-Modeling/blender/Sources/Scratchpixel/Scratchpixel-Home/ data-ctx="notes/3D-Modeling/blender/Sources/Scratchpixel/Geometry CPP anotated" data-src=/notes/3D-Modeling/blender/Sources/Scratchpixel/Scratchpixel-Home class=internal-link>{{title}}</a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://notes.benshurts.com/js/graph.abd4bc2af3869a96524d7d23b76152c7.js></script></div></div><div id=contact_buttons><footer><p>Made by Ben Shurts using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, Â© 2023</p><ul><li><a href=https://notes.benshurts.com/>Home</a></li><li><a href=https://twitter.com/artofbenshurts>Twitter</a></li><li><a href=https://github.com/benshurts>Github</a></li></ul></footer></div></div></body></html>